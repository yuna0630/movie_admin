<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.greenart.movie_admin.mapper.AccountMapper">
    <insert>
        INSERT INTO admin_account_info
        (aai_id, aai_pwd, ai_name, aai_role)
        VALUES (#{aai_id}, #{aai_pwd} ,#{ai_name}, #{aai_role})
    </insert>
    <select id="isDuplicatedId" resultType="java.lang.Integer">
        select count(*) from admin_account_info where aai_id = #{id}
    </select>
    <select id="loginAdmin" resultType="com.greenart.movie_admin.data.account.AdminAccountInfoVO">
        SELECT aai_seq, aai_id, aai_pwd, ai_name, aai_role
        FROM admin_account_info
        where aai_id=#{id} and aai_pwd=#{pwd}
    </select>
    <select id="selectAdminList" resultType="com.greenart.movie_admin.data.account.AdminAccountInfoVO">
        select a.*, b.aah_seq from
        admin_account_info a inner join admin_access_history b
        on a.aai_seq = b.aah_aai_seq 
            where mi_title like '%${keyword}%' 
        <if>
            a.aai_seq = #{seq}
        </if>
    </select>

</mapper>